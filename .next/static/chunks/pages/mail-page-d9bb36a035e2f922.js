(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6440],{96744:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mail-page",function(){return t(50596)}])},50596:function(e,n,t){"use strict";function _tagged_template_literal(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}t.r(n),t.d(n,{default:function(){return CustomPage}});var o,r,i,a=t(2784),u=t(89326),s=t(5632),l=t(2445),c=t(25445),d=t(13980),__assign=function(){return(__assign=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},p={onActivate:d.func,onAddUndo:d.func,onBeforeAddUndo:d.func,onBeforeExecCommand:d.func,onBeforeGetContent:d.func,onBeforeRenderUI:d.func,onBeforeSetContent:d.func,onBeforePaste:d.func,onBlur:d.func,onChange:d.func,onClearUndos:d.func,onClick:d.func,onContextMenu:d.func,onCommentChange:d.func,onCopy:d.func,onCut:d.func,onDblclick:d.func,onDeactivate:d.func,onDirty:d.func,onDrag:d.func,onDragDrop:d.func,onDragEnd:d.func,onDragGesture:d.func,onDragOver:d.func,onDrop:d.func,onExecCommand:d.func,onFocus:d.func,onFocusIn:d.func,onFocusOut:d.func,onGetContent:d.func,onHide:d.func,onInit:d.func,onKeyDown:d.func,onKeyPress:d.func,onKeyUp:d.func,onLoadContent:d.func,onMouseDown:d.func,onMouseEnter:d.func,onMouseLeave:d.func,onMouseMove:d.func,onMouseOut:d.func,onMouseOver:d.func,onMouseUp:d.func,onNodeChange:d.func,onObjectResizeStart:d.func,onObjectResized:d.func,onObjectSelected:d.func,onPaste:d.func,onPostProcess:d.func,onPostRender:d.func,onPreProcess:d.func,onProgressState:d.func,onRedo:d.func,onRemove:d.func,onReset:d.func,onSaveContent:d.func,onSelectionChange:d.func,onSetAttrib:d.func,onSetContent:d.func,onShow:d.func,onSubmit:d.func,onUndo:d.func,onVisualAid:d.func,onSkinLoadError:d.func,onThemeLoadError:d.func,onModelLoadError:d.func,onPluginLoadError:d.func,onIconsLoadError:d.func,onLanguageLoadError:d.func,onScriptsLoad:d.func,onScriptsLoadError:d.func},f=__assign({apiKey:d.string,id:d.string,inline:d.bool,init:d.object,initialValue:d.string,onEditorChange:d.func,value:d.string,tagName:d.string,cloudChannel:d.string,plugins:d.oneOfType([d.string,d.array]),toolbar:d.oneOfType([d.string,d.array]),disabled:d.bool,textareaName:d.string,tinymceScriptSrc:d.oneOfType([d.string,d.arrayOf(d.string),d.arrayOf(d.shape({src:d.string,async:d.bool,defer:d.bool}))]),rollback:d.oneOfType([d.number,d.oneOf([!1])]),scriptLoading:d.shape({async:d.bool,defer:d.bool,delay:d.number})},p),isFunction=function(e){return"function"==typeof e},isEventProp=function(e){return e in p},eventAttrToEventName=function(e){return e.substr(2)},configHandlers2=function(e,n,t,o,r,i,a){var u=Object.keys(r).filter(isEventProp),s=Object.keys(i).filter(isEventProp),l=u.filter(function(e){return void 0===i[e]}),c=s.filter(function(e){return void 0===r[e]});l.forEach(function(e){var n=eventAttrToEventName(e),o=a[n];t(n,o),delete a[n]}),c.forEach(function(t){var r=o(e,t),i=eventAttrToEventName(t);a[i]=r,n(i,r)})},h=0,uuid=function(e){var n=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++h+String(n)},isTextareaOrInput=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},normalizePluginArray=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},isInDoc=function(e){if(!("isConnected"in Node.prototype)){for(var n=e,t=e.parentNode;null!=t;)t=(n=t).parentNode;return n===e.ownerDocument}return e.isConnected},setMode=function(e,n){void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(n):e.setMode(n))},ScriptLoader2_assign=function(){return(ScriptLoader2_assign=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},injectScriptTag=function(e,n,t){var o,r,i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n.id,i.src=n.src,i.async=null!==(o=n.async)&&void 0!==o&&o,i.defer=null!==(r=n.defer)&&void 0!==r&&r;var loadHandler=function(){i.removeEventListener("load",loadHandler),i.removeEventListener("error",errorHandler),t(n.src)},errorHandler=function(e){i.removeEventListener("load",loadHandler),i.removeEventListener("error",errorHandler),t(n.src,e)};i.addEventListener("load",loadHandler),i.addEventListener("error",errorHandler),e.head&&e.head.appendChild(i)},createDocumentScriptLoader=function(e){var n={},scriptLoadOrErrorHandler=function(e,t){var o=n[e];o.done=!0,o.error=t;for(var r=0,i=o.handlers;r<i.length;r++)(0,i[r])(e,t);o.handlers=[]};return{loadScripts:function(t,o,r){var failureOrLog=function(e){return void 0!==r?r(e):console.error(e)};if(0===t.length){failureOrLog(Error("At least one script must be provided"));return}for(var i=0,a=!1,loaded=function(e,n){a||(n?(a=!0,failureOrLog(n)):++i===t.length&&o())},u=0;u<t.length;u++){var s=t[u],l=n[s.src];if(l)l.done?loaded(s.src,l.error):l.handlers.push(loaded);else{var c=uuid("tiny-");n[s.src]={id:c,src:s.src,done:!1,error:null,handlers:[loaded]},injectScriptTag(e,ScriptLoader2_assign({id:c},s),scriptLoadOrErrorHandler)}}},deleteScripts:function(){for(var t,o=0,r=Object.values(n);o<r.length;o++){var i=r[o],a=e.getElementById(i.id);null!=a&&"SCRIPT"===a.tagName&&(null===(t=a.parentNode)||void 0===t||t.removeChild(a))}n={}},getDocument:function(){return e}}},v=(o=[],r=function(e){var n=o.find(function(n){return n.getDocument()===e});return void 0===n&&(n=createDocumentScriptLoader(e),o.push(n)),n},{loadList:function(e,n,t,o,i){var doLoad=function(){return r(e).loadScripts(n,o,i)};t>0?setTimeout(doLoad,t):doLoad()},reinitialize:function(){for(var e=o.pop();null!=e;e=o.pop())e.deleteScripts()}}),getTinymce=function(e){return e&&e.tinymce?e.tinymce:null},m=(i=function(e,n){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function __(){this.constructor=e}i(e,n),e.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}),Editor_assign=function(){return(Editor_assign=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},g=function(e){function Editor(n){var t,o,r,i=e.call(this,n)||this;return i.rollbackTimer=void 0,i.valueCursor=void 0,i.rollbackChange=function(){var e=i.editor,n=i.props.value;e&&n&&n!==i.currentContent&&e.undoManager.ignore(function(){if(e.setContent(n),i.valueCursor&&(!i.inline||e.hasFocus()))try{e.selection.moveToBookmark(i.valueCursor)}catch(e){}}),i.rollbackTimer=void 0},i.handleBeforeInput=function(e){if(void 0!==i.props.value&&i.props.value===i.currentContent&&i.editor&&(!i.inline||i.editor.hasFocus()))try{i.valueCursor=i.editor.selection.getBookmark(3)}catch(e){}},i.handleBeforeInputSpecial=function(e){("Enter"===e.key||"Backspace"===e.key||"Delete"===e.key)&&i.handleBeforeInput(e)},i.handleEditorChange=function(e){var n=i.editor;if(n&&n.initialized){var t=n.getContent();void 0===i.props.value||i.props.value===t||!1===i.props.rollback||i.rollbackTimer||(i.rollbackTimer=window.setTimeout(i.rollbackChange,"number"==typeof i.props.rollback?i.props.rollback:200)),t!==i.currentContent&&(i.currentContent=t,isFunction(i.props.onEditorChange)&&i.props.onEditorChange(t,n))}},i.handleEditorChangeSpecial=function(e){("Backspace"===e.key||"Delete"===e.key)&&i.handleEditorChange(e)},i.initialise=function(e){void 0===e&&(e=0);var n,t,o,r,a,u=i.elementRef.current;if(u){if(!isInDoc(u)){if(0===e)setTimeout(function(){return i.initialise(1)},1);else if(e<100)setTimeout(function(){return i.initialise(e+1)},100);else throw Error("tinymce can only be initialised when in a document");return}var s=getTinymce(i.view);if(!s)throw Error("tinymce should have been loaded into global scope");var l=Editor_assign(Editor_assign({},i.props.init),{selector:void 0,target:u,readonly:i.props.disabled,inline:i.inline,plugins:(n=null===(o=i.props.init)||void 0===o?void 0:o.plugins,t=i.props.plugins,normalizePluginArray(n).concat(normalizePluginArray(t))),toolbar:null!==(r=i.props.toolbar)&&void 0!==r?r:null===(a=i.props.init)||void 0===a?void 0:a.toolbar,setup:function(e){i.editor=e,i.bindHandlers({}),i.inline&&!isTextareaOrInput(u)&&e.once("PostRender",function(n){e.setContent(i.getInitialValue(),{no_events:!0})}),i.props.init&&isFunction(i.props.init.setup)&&i.props.init.setup(e)},init_instance_callback:function(e){var n,t,o=i.getInitialValue();i.currentContent=null!==(n=i.currentContent)&&void 0!==n?n:e.getContent(),i.currentContent!==o&&(i.currentContent=o,e.setContent(o),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var r=null!==(t=i.props.disabled)&&void 0!==t&&t;setMode(i.editor,r?"readonly":"design"),i.props.init&&isFunction(i.props.init.init_instance_callback)&&i.props.init.init_instance_callback(e)}});i.inline||(u.style.visibility=""),isTextareaOrInput(u)&&(u.value=i.getInitialValue()),s.init(l)}},i.id=i.props.id||uuid("tiny-react"),i.elementRef=a.createRef(),i.inline=null!==(r=null!==(t=i.props.inline)&&void 0!==t?t:null===(o=i.props.init)||void 0===o?void 0:o.inline)&&void 0!==r&&r,i.boundHandlers={},i}return m(Editor,e),Object.defineProperty(Editor.prototype,"view",{get:function(){var e,n;return null!==(n=null===(e=this.elementRef.current)||void 0===e?void 0:e.ownerDocument.defaultView)&&void 0!==n?n:window},enumerable:!1,configurable:!0}),Editor.prototype.componentDidUpdate=function(e){var n,t,o=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(n=this.currentContent)&&void 0!==n?n:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){var r=this.editor;r.undoManager.transact(function(){if(!o.inline||r.hasFocus())try{e=r.selection.getBookmark(3)}catch(e){}var e,n=o.valueCursor;if(r.setContent(o.props.value),!o.inline||r.hasFocus())for(var t=0,i=[e,n];t<i.length;t++){var a=i[t];if(a)try{r.selection.moveToBookmark(a),o.valueCursor=a;break}catch(e){}}})}if(this.props.disabled!==e.disabled){var i=null!==(t=this.props.disabled)&&void 0!==t&&t;setMode(this.editor,i?"readonly":"design")}}},Editor.prototype.componentDidMount=function(){var e,n,t,o,r,i=this;null!==getTinymce(this.view)?this.initialise():Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length?null===(n=(e=this.props).onScriptsLoadError)||void 0===n||n.call(e,Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array.")):(null===(t=this.elementRef.current)||void 0===t?void 0:t.ownerDocument)&&v.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!==(r=null===(o=this.props.scriptLoading)||void 0===o?void 0:o.delay)&&void 0!==r?r:0,function(){var e,n;null===(n=(e=i.props).onScriptsLoad)||void 0===n||n.call(e),i.initialise()},function(e){var n,t;null===(t=(n=i.props).onScriptsLoadError)||void 0===t||t.call(n,e)})},Editor.prototype.componentWillUnmount=function(){var e=this,n=this.editor;n&&(n.off(this.changeEvents(),this.handleEditorChange),n.off(this.beforeInputEvent(),this.handleBeforeInput),n.off("keypress",this.handleEditorChangeSpecial),n.off("keydown",this.handleBeforeInputSpecial),n.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(t){n.off(t,e.boundHandlers[t])}),this.boundHandlers={},n.remove(),this.editor=void 0)},Editor.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},Editor.prototype.changeEvents=function(){var e,n,t;return(null===(t=null===(n=null===(e=getTinymce(this.view))||void 0===e?void 0:e.Env)||void 0===n?void 0:n.browser)||void 0===t?void 0:t.isIE())?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},Editor.prototype.beforeInputEvent=function(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"},Editor.prototype.renderInline=function(){var e=this.props.tagName,n=void 0===e?"div":e;return a.createElement(n,{ref:this.elementRef,id:this.id})},Editor.prototype.renderIframe=function(){return a.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},Editor.prototype.getScriptSources=function(){var e,n,t=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async,o=null===(n=this.props.scriptLoading)||void 0===n?void 0:n.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"==typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:t,defer:o}]:this.props.tinymceScriptSrc.map(function(e){return"string"==typeof e?{src:e,async:t,defer:o}:e});var r=this.props.cloudChannel,i=this.props.apiKey?this.props.apiKey:"no-api-key";return[{src:"https://cdn.tiny.cloud/1/".concat(i,"/tinymce/").concat(r,"/tinymce.min.js"),async:t,defer:o}]},Editor.prototype.getInitialValue=function(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""},Editor.prototype.bindHandlers=function(e){var n=this;if(void 0!==this.editor){t=this.editor,o=this.props,r=this.boundHandlers,configHandlers2(function(e){return n.props[e]},t.on.bind(t),t.off.bind(t),function(e,n){return function(o){var r;return null===(r=e(n))||void 0===r?void 0:r(o,t)}},e,o,r);var t,o,r,isValueControlled=function(e){return void 0!==e.onEditorChange||void 0!==e.value},i=isValueControlled(e),a=isValueControlled(this.props);!i&&a?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):i&&!a&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},Editor.propTypes=f,Editor.defaultProps={cloudChannel:"6"},Editor}(a.Component),y=t(55364),b=t(25631),E=t(10081),C=t(1804),S=t(2756),T=t(34406);function _templateObject(){let e=_tagged_template_literal(["\n  mutation ($html: String!, $type: String!) {\n    sendBulkMail(html: $html, type: $type) {\n      message\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=_tagged_template_literal(["\n  query {\n    authenticatedItem {\n      ... on User {\n        id\n        isAdmin\n      }\n    }\n  }\n"]);return _templateObject1=function(){return e},e}let _=(0,E.Ps)(_templateObject()),k=(0,E.Ps)(_templateObject1());function CustomPage(){var e;let n=(0,s.useRouter)(),{addToast:t}=(0,y.e)(),[o,{data:r,loading:i,error:d}]=(0,C.D)(_),{data:p,error:f}=(0,S.a)(k),[h,v]=a.useState({label:"mail to",value:""}),m=(0,a.useRef)(null),Mail=async()=>{m.current&&h.value?o({variables:{html:JSON.stringify(m.current.getContent()),type:h.value}}):t({title:"Mail",message:"Please choose mail type",tone:"warning"})};return a.useEffect(()=>{r&&t({title:"Mail",message:"Mail sent succfully",tone:"positive"})},[r]),a.useEffect(()=>{var e;!p||(null==p?void 0:null===(e=p.authenticatedItem)||void 0===e?void 0:e.isAdmin)||n.push("/")},[p]),a.useEffect(()=>{d&&t({title:"Mail",message:"Somthing went wrong",tone:"negative"})},[d]),(null==p?void 0:null===(e=p.authenticatedItem)||void 0===e?void 0:e.isAdmin)?(0,c.tZ)(u._z,{header:(0,c.tZ)(c.X6,{type:"h3"},"Mail")},(0,c.tZ)(l.Ph,{width:"small",value:h,options:[{label:"All",value:"ALL"},{label:"Willmeetup",value:"WILLMEETUP"},{label:"Paid Users",value:"PAID_USERS"}],onChange:v}),(0,c.tZ)(g,{apiKey:T.env.TINYMC_API_KEY||"2o29izks11uxeewky871158ukl0r5r383wxef6rl2vcx40hp",onInit:(e,n)=>m.current=n,initialValue:"",init:{branding:!1,height:300,menubar:!1,toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),(0,c.tZ)(b.zx,{onClick:()=>{Mail()},tone:"active",style:{marginTop:"10px"}},"Send")):null}},34406:function(e){var n,t,o,r=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{t="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){t=defaultClearTimeout}}();var i=[],a=!1,u=-1;function cleanUpNextTick(){a&&o&&(a=!1,o.length?i=o.concat(i):u=-1,i.length&&drainQueue())}function drainQueue(){if(!a){var e=runTimeout(cleanUpNextTick);a=!0;for(var n=i.length;n;){for(o=i,i=[];++u<n;)o&&o[u].run();u=-1,n=i.length}o=null,a=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===defaultClearTimeout||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function Item(e,n){this.fun=e,this.array=n}function noop(){}r.nextTick=function(e){var n=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];i.push(new Item(e,n)),1!==i.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=noop,r.addListener=noop,r.once=noop,r.off=noop,r.removeListener=noop,r.removeAllListeners=noop,r.emit=noop,r.prependListener=noop,r.prependOnceListener=noop,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}},68262:function(e,n,t){"use strict";var o=t(23586);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,e.exports=function(){function shim(e,n,t,r,i,a){if(a!==o){var u=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}},13980:function(e,n,t){e.exports=t(68262)()},23586:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=96744)}),_N_E=e.O()}]);